/*  
 * 2J Gallery			http://2joomla.net/wordpress-plugins/2j-gallery
 * Version:           	2.1.5 - 21259
 * Author:            	2J Gallery Team
 * Author URI:        	http://2joomla.net
 * License:           	GPL-2.0+
 * License URI:       	http://www.gnu.org/licenses/gpl-2.0.txt
 * Date:              	Mon, 05 Jun 2017 20:41:48 GMT
 */
!function(o,t){o.twoJGalleryJSConfig=function(o){this.config=void 0,this.error=void 0,this.isReady=!1,this.read(o)},twoJGalleryJSConfig.prototype.read=function(o){var i=this;this.isReady||t.ajax({url:twoJGalleryJSConst.ajaxUrl,method:"get",data:{action:twoJGalleryJSConst.typePost+"_config",gallery_id:o},dataType:"json",success:function(o){i.isReady=!0,i.config=o},error:function(o){i.isReady=!0,i.error=o.responseText,i.config={}}})},twoJGalleryJSConfig.prototype.get=function(o){var i=o.split("/"),e=this.config;return t.each(i,function(o,t){if(void 0===(e=e[t]))return!1}),e}}(window,jQuery);
/* twoJGalleryJSCache */
!function(t,o){var e=function(){this.storage={}};e.prototype.set=function(t,o){this.storage[t]=o},e.prototype.get=function(t){return void 0===this.storage[t]?void 0:this.storage[t]},e.prototype.makeHash=function(t,o){return o+":"+JSON.stringify(t).replace(/[^a-z0-9]/gi,"")},t.twoJGalleryJSCache=new e}(window,jQuery);
/* core gallery */
!function(e,t){e.twoJGalleryJSObj=function(e){this.$element=e,this.config=new twoJGalleryJSConfig(this.getId()),this.blocks={};var t=this,n=setInterval(function(){t.config.isReady&&(clearInterval(n),t.config.error||t.init())},100)},twoJGalleryJSObj.prototype.namespace="gallery",twoJGalleryJSObj.prototype.init=function(){var e=this,n=this.config.get("gallery/css");e.$element.on("onChangeGallery."+e.namespace,function(t,n){e.onChangeGallery(t,n)});var a=new twoJGalleryJSNavigation(this);e.blocks[a.name]=a;var l=new twoJGalleryJSContent(this);e.blocks[l.name]=l;var o=new twoJGalleryJSBreadcrumbs(this);e.blocks[o.name]=o;var i=new twoJGalleryJSPagination(this);if(e.blocks[i.name]=i,t.each(e.blocks,function(e,t){t.init()}),n){var r=n.replace(/GALLERYID/g,e.$element.attr("id")),s=document.getElementsByTagName("head")[0],c=document.createElement("style");c.setAttribute("type","text/css"),c.styleSheet?c.styleSheet.cssText=r:c.appendChild(document.createTextNode(r)),s.appendChild(c)}},twoJGalleryJSObj.prototype.getId=function(){return parseInt(this.$element.attr("data-twoJG-id"))},twoJGalleryJSObj.prototype.onChangeGallery=function(e,t){this.$element.attr("data-twoJG-id",t.gallery_id)}}(window,jQuery);
/* twoJGalleryJSBlock */
!function(t,e){t.twoJGalleryJSBlock=function(t){this.gallery=t,this.$element=e(".block.twoJG_"+this.name,this.gallery.$element),this.view=this.$element.attr("data-view")},twoJGalleryJSBlock.prototype.name=void 0,twoJGalleryJSBlock.prototype.view=void 0,twoJGalleryJSBlock.prototype.init=function(){},twoJGalleryJSBlock.prototype.load=function(t){var o=this,l=o.name;t[l]=e.extend({view:o.$element.attr("data-view")},t[l]),t=e.extend({action:twoJGalleryJSConst.typePost+"_block",gallery_id:o.gallery.$element.attr("data-twoJG-id"),root_gallery_id:o.gallery.$element.attr("data-twoJG-root-id"),block:o.name},t);var a=twoJGalleryJSCache.makeHash(t,"block"),n=twoJGalleryJSCache.get(a);void 0!==n?o.onLoad(t,n):e.ajax({url:twoJGalleryJSConst.ajaxUrl,method:"get",data:t,success:function(e){o.onLoad(t,e),twoJGalleryJSCache.set(a,e)},error:function(t){o.$element.html(t.responseText)}})},twoJGalleryJSBlock.prototype.onLoad=function(t,e){this.$element.html(e),this.init()}}(window,jQuery);
/* twoJGalleryJSNavigation */
!function(t,e){t.twoJGalleryJSNavigation=function(t){twoJGalleryJSBlock.apply(this,arguments);var e=this;e.gallery.$element.on("onChangeGallery",function(t,a){e.onChangeGallery(t,a)})},twoJGalleryJSNavigation.prototype=Object.create(twoJGalleryJSBlock.prototype),twoJGalleryJSNavigation.prototype.constructor=twoJGalleryJSNavigation,twoJGalleryJSNavigation.prototype.name="navigation",twoJGalleryJSNavigation.prototype.init=function(){var t=this;switch(t.view){case"list":break;case"tree":this.initViewTree()}e("a",t.$element).click(function(){var a=e(this).attr("data-twoJG-id");return t.gallery.$element.trigger("onChangeGallery",{gallery_id:a}),!1})},twoJGalleryJSNavigation.prototype.initViewTree=function(){},twoJGalleryJSNavigation.prototype.onChangeGallery=function(t,a){var o=this,i=o.gallery.config.get("gallery/block/navigation/item/class-active");e("a."+i,o.$element).removeClass(i),e('a[data-twoJG-id="'+a.gallery_id+'"]',o.$element).addClass(i)}}(window,jQuery);
/* twoJGalleryJSContent */
!function(t,e){t.twoJGalleryJSContent=function(t){twoJGalleryJSBlock.apply(this,arguments);var e=this;e.grid={entity:void 0,setting:void 0,playlistMeta:[]},e.gallery.$element.on("onChangeGallery",function(t,n){e.onChangeGallery(t,n)}),e.gallery.$element.on("onChangePage",function(t,n){e.onChangePage(t,n)})},twoJGalleryJSContent.prototype=Object.create(twoJGalleryJSBlock.prototype),twoJGalleryJSContent.prototype.constructor=twoJGalleryJSContent,twoJGalleryJSContent.prototype.name="content",twoJGalleryJSContent.prototype.init=function(){var n=this;n.grid.setting&&n.grid.setting.instanceName&&t[n.grid.setting.instanceName]&&(t[n.grid.setting.instanceName]=void 0),n.grid.setting=e.extend({},n.gallery.config.get("gallery/block/content/grid/setting")),n.grid.setting.parentId=n.$element.find(".js-grid-view").attr("id"),n.grid.setting.playlistId=n.$element.find(".js-playlist").attr("id"),n.grid.setting.instanceName="instanceName-"+n.grid.setting.parentId,n.grid.setting.mainFolderPath=twoJGalleryJSConst.moduleUri+n.grid.setting.mainFolderPath;var o=0;n.grid.playlistMeta=[],e("#"+n.grid.setting.playlistId+" ul").each(function(t,i){e("li",i).each(function(t,i){var a=e(i);n.grid.playlistMeta[o]={"data-twoJG-id":a.attr("data-twoJG-id"),"data-twoJG-type":a.attr("data-twoJG-type"),"data-twoJG-link-type":a.attr("data-twoJG-link-type"),"data-url":a.attr("data-url")},o++})}),0==GAMLDATUtils.isReadyMethodCalled_bl&&GAMLDATUtils.checkIfHasTransofrms(),n.grid.entity=new GAMMAGRID(n.grid.setting),n.grid.entity.setupLightBox=function(){},n.grid.entity.openLightbox=function(o){var i=n.grid.playlistMeta[o.id]||null;if(!i)return!1;if("self"==i["data-twoJG-link-type"])return location.href=i["data-url"],!1;if("blank"==i["data-twoJG-link-type"])return t.open(i["data-url"],"_blank"),!1;if("gallery"==i["data-twoJG-link-type"])return n.gallery.$element.trigger("onChangeGallery",{gallery_id:i["data-twoJG-id"]}),!1;var a=jQuery(t),l=.6*a.width(),r=.8*a.height(),d=[],s={},y=0,g=0,u=null;e.each(n.grid.entity.data.lightboxPlaylist_ar.playlistItems,function(t,e){var i=n.grid.playlistMeta[t];i&&"blank"!=i["data-twoJG-link-type"]&&"self"!=i["data-twoJG-link-type"]&&"gallery"!=i["data-twoJG-link-type"]&&(s={url:e.url},"video"==i["data-twoJG-link-type"]&&((u=n.extractYoutubeVideoId(s.url))&&(s.url="//youtube.com/embed/"+u),s.options={},s.options.thumbnail=e.thumbnailPath_str,s.options.icon="video",s.options.width=l,s.options.height=r),d.push(s),t==o.id&&(g=y),y++)}),e.LightBoxTwo(d,e.extend({},n.gallery.config.get("gallery/block/content/lightbox/setting"),{startFrom:g}))}},twoJGalleryJSContent.prototype.extractYoutubeVideoId=function(t){var e;return-1!==t.indexOf("youtube.com/watch?v=")?e=t.substr(t.indexOf("youtube.com/watch?v=")+20):-1!==t.indexOf("youtube.com/watch/?v=")?e=t.substr(t.indexOf("youtube.com/watch/?v=")+21):-1!==t.indexOf("youtu.be")?e=t.substr(t.indexOf("youtu.be")+9):-1!==t.indexOf("youtube.com/embed/")?e=t.substr(t.indexOf("youtube.com/embed/")+18):(console.warn("YouTubeUrlNormalize getvideoId not a youTube Video: "+t),e=null),e},twoJGalleryJSContent.prototype.onLoad=function(t,n){e("html, body").animate({scrollTop:this.gallery.$element.offset().top-100},"slow"),this.$element.html(n),this.init()},twoJGalleryJSContent.prototype.onChangeGallery=function(t,n){e("html, body").animate({scrollTop:this.gallery.$element.offset().top-100},"slow"),this.$element.html(""),this.load(n)},twoJGalleryJSContent.prototype.onChangePage=function(t,n){e("html, body").animate({scrollTop:this.gallery.$element.offset().top-100},"slow"),this.$element.html(""),this.load(n)}}(window,jQuery);
/* twoJGalleryJSBreadcrumbs */
!function(e,r){e.twoJGalleryJSBreadcrumbs=function(e){twoJGalleryJSBlock.apply(this,arguments);var r=this;r.gallery.$element.on("onChangeGallery",function(e,t){r.onChangeGallery(e,t)})},twoJGalleryJSBreadcrumbs.prototype=Object.create(twoJGalleryJSBlock.prototype),twoJGalleryJSBreadcrumbs.prototype.constructor=twoJGalleryJSBreadcrumbs,twoJGalleryJSBreadcrumbs.prototype.name="breadcrumbs",twoJGalleryJSBreadcrumbs.prototype.init=function(){var e=this;r("a",e.$element).click(function(){var t=r(this).attr("data-twoJG-id");return e.gallery.$element.trigger("onChangeGallery",{gallery_id:t}),!1})},twoJGalleryJSBreadcrumbs.prototype.onChangeGallery=function(e,r){this.load({gallery_id:this.gallery.$element.attr("data-twoJG-root-id"),active_gallery_id:r.gallery_id})}}(window,jQuery);
/* twoJGalleryJSPagination */
!function(e,t){e.twoJGalleryJSPagination=function(e){twoJGalleryJSBlock.apply(this,arguments);var t=this;t.isLoadingThumbs=!0,t.gallery.$element.on("onChangeGallery",function(e,a){t.onChangeGallery(e,a)})},twoJGalleryJSPagination.prototype=Object.create(twoJGalleryJSBlock.prototype),twoJGalleryJSPagination.prototype.constructor=twoJGalleryJSPagination,twoJGalleryJSPagination.prototype.name="paging",twoJGalleryJSPagination.prototype.init=function(){var e=this;switch(e.view){case"numbering":e.initViewNumbering();break;case"load_more":e.initViewLoadMore()}},twoJGalleryJSPagination.prototype.initViewNumbering=function(){var e=this,a=t(".numbering",this.$element),n=e.gallery.config.get("gallery/block/pagination/numbering/setting");a.length>0&&a.pagination(t.extend(n,{currentPage:a.attr("data-twoJG-page"),itemsOnPage:a.attr("data-twoJG-per_page"),pages:a.attr("data-twoJG-pages"),onPageClick:function(t){return e.setPage(t),!1}}))},twoJGalleryJSPagination.prototype.initViewLoadMore=function(){var a=this,n=t(".load_more",a.$element);if(n.length&&t("a",n).on("click",function(){if(a.isLoadingThumbs)return!1;var e=a.getPage(),t=a.getPages();return(e+=1)<=t&&(a.isLoadingThumbs=!0,a.setPage(e)),e===t&&n.hide(),!1}),t(a.gallery.blocks.content.$element).off("jsGridFW.loaded.gallery",".grid"),t(a.gallery.blocks.content.$element).on("jsGridFW.loaded.gallery",".grid",function(){setTimeout(function(){a.isLoadingThumbs=!1},500),setTimeout(function(){t(e).trigger("resize")},2e3),setTimeout(function(){t(e).trigger("resize")},4e3),setTimeout(function(){t(e).trigger("resize")},6e3)}),n.length&&"scroll"==a.gallery.config.get("gallery/block/pagination/load_more/type")){var i=t(e),o="gallery-"+a.gallery.getId();i.off("scroll."+o),i.on("scroll."+o,function(){a.isLoadingThumbs||i.height()+i.scrollTop()>n.offset().top+0&&a.getPage()<a.getPages()&&t("a",n).trigger("click")})}},twoJGalleryJSPagination.prototype.setPage=function(e){var a={};a[this.name]={page:e},t("."+this.view,this.$element).attr("data-twoJG-page",e),this.gallery.$element.trigger("onChangePage",a)},twoJGalleryJSPagination.prototype.getPage=function(e,a){var n=parseInt(t("."+this.view,this.$element).attr("data-twoJG-page"));return isNaN(n)?1:n},twoJGalleryJSPagination.prototype.getPerPage=function(e,a){var n=parseInt(t("."+this.view,this.$element).attr("data-twoJG-per_page"));return isNaN(n)?12:n},twoJGalleryJSPagination.prototype.getPages=function(e,a){var n=parseInt(t("."+this.view,this.$element).attr("data-twoJG-pages"));return isNaN(n)?1:n},twoJGalleryJSPagination.prototype.onChangeGallery=function(e,t){t[this.name]={page:1},this.load(t)}}(window,jQuery);